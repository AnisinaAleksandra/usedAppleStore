<ng-container *ngIf="display$ | async as display">
  <section [class.open]="display === 'open'" (click)="close()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-close">
        <button class="close" type="button" (click)="close()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            height="20px"
            id="Layer_1"
            style="enable-background: new 0 0 512 512"
            version="1.1"
            viewBox="0 0 512 512"
            width="20px"
            xml:space="preserve"
          >
            <path
              d="M443.6,387.1L312.4,255.4l131.5-130c5.4-5.4,5.4-14.2,0-19.6l-37.4-37.6c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4  L256,197.8L124.9,68.3c-2.6-2.6-6.1-4-9.8-4c-3.7,0-7.2,1.5-9.8,4L68,105.9c-5.4,5.4-5.4,14.2,0,19.6l131.5,130L68.4,387.1  c-2.6,2.6-4.1,6.1-4.1,9.8c0,3.7,1.4,7.2,4.1,9.8l37.4,37.6c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1L256,313.1l130.7,131.1  c2.7,2.7,6.2,4.1,9.8,4.1c3.5,0,7.1-1.3,9.8-4.1l37.4-37.6c2.6-2.6,4.1-6.1,4.1-9.8C447.7,393.2,446.2,389.7,443.6,387.1z"
            />
          </svg>
        </button>
      </div>

      <div class="modal-body">
        <div class="modal-title">{{ modalTitle }}</div>
        <form class="form-control" *ngIf="isOrderSendeng === false" #form novalidate [formGroup]="orderForm">
          <input
            type="text"
            class="form-control-input"
            id="inputName"
            name="name"
            placeholder="Ваше имя"
            formControlName="name"
            [ngStyle]="{
              'margin-bottom':
                orderForm.get('name')?.invalid &&
                (orderForm.get('name')?.dirty || orderForm.get('name')?.touched)
                  ? '0'
                  : '15px',
              'border-color':
                orderForm.get('name')?.invalid &&
                (orderForm.get('name')?.dirty || orderForm.get('name')?.touched)
                  ? 'red'
                  : ''
            }"
          />
          <div
            class="invalid-errors"
            *ngIf="orderForm!.get('name')?.invalid 
          && (orderForm.get('name')?.touched || orderForm.get('name')?.dirty)
          && (orderForm.get('name')?.errors?.['required']|| orderForm.get('name')?.errors?.['pattern'])"
          >
            <span
              class="error-text"
              *ngIf="orderForm.get('name')?.errors?.['required']"
              [ngStyle]="{
                'color':
                orderForm!.get('name')?.invalid 
                && (orderForm.get('name')?.touched || orderForm.get('name')?.dirty)
                && (orderForm.get('name')?.errors?.['required']|| orderForm.get('name')?.errors?.['pattern'])
                    ? 'red'
                    : ''
              }"
              >Необходимо ввести имя</span
            >
            <span
              class="error-text"
              *ngIf="orderForm.get('name')?.errors?.['pattern']"
              [ngStyle]="{
                'color':
                orderForm!.get('name')?.invalid 
                && (orderForm.get('name')?.touched || orderForm.get('name')?.dirty)
                && (orderForm.get('name')?.errors?.['required']|| orderForm.get('name')?.errors?.['pattern'])
                    ? 'red'
                    : ''
              }"
              >Введите имя + отчество/фамилию</span
            >
          </div>
          <input
            type="text"
            class="form-control-input"
            placeholder="Электронная почта"
            [ngStyle]="{
              'margin-bottom':
                orderForm.get('email')?.invalid &&
                (orderForm.get('email')?.dirty ||
                  orderForm.get('email')?.touched)
                  ? '0'
                  : '15px',
              'border-color':
                orderForm.get('email')?.invalid &&
                (orderForm.get('email')?.dirty ||
                  orderForm.get('email')?.touched)
                  ? 'red'
                  : ''
            }"
            formControlName="email"
          />
          <div
            class="invalid-errors"
            *ngIf="orderForm!.get('email')!.invalid 
  && (orderForm.get('email')?.touched || orderForm.get('email')?.dirty)
  && (orderForm.get('email')?.errors?.['required']|| orderForm.get('email')?.errors?.['pattern'])"
          >
            <span
              class="error-text"
              *ngIf="orderForm.get('email')?.errors?.['required']"
              [ngStyle]="{
                color:
                  orderForm.get('email')?.invalid &&
                  (orderForm.get('email')?.dirty ||
                    orderForm.get('email')?.touched)
                    ? 'red'
                    : ''
              }"
              >Необходимо ввести корректный email</span
            >
          </div>
          <input
            id="inputPhone"
            name="phone"
            formControlName="phone"
            class="form-control-input"
            placeholder="Ваш номер телефона"
            [ngStyle]="{
              'margin-bottom':
                orderForm.get('phone')?.invalid &&
                (orderForm.get('phone')?.dirty ||
                  orderForm.get('phone')?.touched)
                  ? '0'
                  : '15px',
              'border-color':
                orderForm.get('phone')?.invalid &&
                (orderForm.get('phone')?.dirty ||
                  orderForm.get('phone')?.touched)
                  ? 'red'
                  : ''
            }"
          />

          <div
            class="invalid-errors"
            *ngIf="orderForm!.get('phone')!.invalid 
      && (orderForm.get('phone')?.touched || orderForm.get('phone')?.dirty)
      && (orderForm.get('phone')?.errors?.['required']|| orderForm.get('phone')?.errors?.['pattern'] || orderForm.get('phone')?.errors?.['minlength'])"
          >
            <span
              class="error-text"
              *ngIf="orderForm.get('phone')?.errors?.['required']"
              [ngStyle]="{
                color:
                  orderForm.get('phone')?.invalid &&
                  (orderForm.get('phone')?.dirty ||
                    orderForm.get('phone')?.touched)
                    ? 'red'
                    : ''
              }"
              >Необходимо ввести телефон</span
            >

          
          </div>
        </form>
        <div class="modal-footer">
          <button type="button" class="btn" (click)="clickBtn(titleButton)">
            {{ titleButton }}
          </button>
        </div>
      </div>
    </div>
  </section>
</ng-container>
